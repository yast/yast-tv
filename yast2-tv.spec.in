@HEADER-COMMENT@

@HEADER@
Group:	System/YaST
License: GPL-2.0+
BuildRequires: perl-XML-Writer update-desktop-files yast2 yast2-devtools yast2-sound yast2-testsuite

# .modprobe_blacklist agent
Requires:	yast2-core >= 2.16.19
# GetInstArgs::automatic_configuration
Requires:	yast2 >= 2.21.22
Requires:	yast2-sound
Provides:	yast2-config-tv yast2-db-tv
Obsoletes:	yast2-config-tv yast2-db-tv
Provides:	yast2-lib-hardware
Obsoletes:	yast2-lib-hardware
Provides:	yast2-trans-tv
Obsoletes:	yast2-trans-tv
PreRequires:	sed

BuildArchitectures:	noarch

Summary:	YaST2 - TV Configuration

%description
This package contains the YaST2 component for TV card configuration.

@PREP@

@BUILD@

@INSTALL@

@CLEAN@

%post
# rename the config file to the new modprobe schema
if test -e /etc/modprobe.d/tv; then
    mv -f /etc/modprobe.d/tv /etc/modprobe.d/50-tv.conf
fi

# comment out bit_test option (bnc#712023)
if test -e /etc/modprobe.d/50-tv.conf; then
    sed -i -e 's/^\([ \t]*options[ \t]*i2c-algo-bit[ \t]*bit_test=1\)/# \1/' /etc/modprobe.d/50-tv.conf
fi


%files
%defattr(-,root,root)
%dir @yncludedir@/tv
@yncludedir@/tv/*
@clientdir@/*.ycp
@moduledir@/*.*
@desktopdir@/*.desktop
@scrconfdir@/*.scr
@ydatadir@/*.ycp
%doc @docdir@
