{

    include "testsuite.ycp";

    map READ = $[
	"etc" : $[ "install_inf" : $[] ],
	"target" : $[ "ycp" : $[] ],
	"probe" : $[ "system" : []],
    ];

    TESTSUITE_INIT([READ], nil);
    import "Tv";

	define TEST_It_Now(map auto, map params) ``{
	DUMP("---------------");

	// cards_database cannot be nil (see ReadCardsDatabase)
	/*
	Tv::cards_database = nil;
	list items = Tv::CardsDBVendorsAsItems(auto,params);
	DUMP(items);*/


	Tv::cards_database = [];
	list items = Tv::CardsDBVendorsAsItems(auto,params);
	DUMP(items);

	Tv::cards_database = [
	$["cards": [
		$["module":"bttv", "name":"Unknown bttv card", "parameters":$["card":"0"]],
		$["module":"bttv", "name":"TView99 CPH06X", "parameters":$["card":"38"]]],
	  "name":"Other vendors"],
	$["cards": [
		$["module":"bttv", "name":"ATI TV-Wonder VE", "parameters":$["card":"64"]]],
	  "name":"ATI"]
	];
	items = Tv::CardsDBVendorsAsItems(auto,params);
	DUMP(items);

	}

    TEST_It_Now(nil, nil);

	// preselected should be the vendor of autodetected card
    TEST_It_Now( $["module":"bttv",
				   "name":"My Tv_card",
				   "unique_key":"123xyz"
				 ],nil);

	// preselected should be the vendor of card 64
	TEST_It_Now( $["name":"my autodetected card" ], $["card":"64"]);

}
