{

    include "testsuite.ycp";

    map READ = $[
	"etc" : $[ "install_inf" : $[] ],
	"target" : $[ "ycp" : $[] ],
	"probe" : $[ "system" : []],
    ];

    TESTSUITE_INIT([READ], nil);
    import "Tv";

    map READ_nil =
    $[ "target":
		$[ "yast2": nil ]
	];

    map READ_empty =
    $[ "target":
		$[ "yast2": $[] ]
	];

    map READ_db =
	$[ "target": $[
			"yast2": $[
			  "bttv" : [
			    $[
			      "name" : _("No tuner"),
			      "parameters" : $[
			        "tuner" : "4"
			      ]
			    ],
			    $[
			      "name" : "Alps HSBH1",
			      "parameters" : $[
			        "tuner" : "9"
			      ]
			    ]
			  ]
			]
		]
	];

	// cannot read the database file (creates err-file due to Report::Error)
	/*
	Tv::tuners_database=nil;
    TEST (``(Tv::ReadCardsDatabase()), [ READ_nil, $[], $[] ], nil);
	*/

	// empty database
	Tv::tuners_database=nil;
	TEST (``(Tv::ReadTunersDatabase()), [ READ_empty, $[], $[] ], nil);

	// doesn't read the file (card_database is not nil)
	TEST (``(Tv::ReadTunersDatabase()), [ READ_db, $[], $[] ], nil);

	Tv::tuners_database=nil;
    TEST (``(Tv::ReadTunersDatabase()), [ READ_db, $[], $[] ], nil);
}
